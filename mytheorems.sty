\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mytheorems}%
\RequirePackage{xkeyval}
% Definitions of beamer theorem environments and refnames.
%
% Copyright (BSD-2) 2009-2016 by Ioannis Filippidis
% author's email: jfilippidis@gmail.com

%todo: debug \includesvgpdf with no #1
%todo: mv modification checks from python to latex, to avoid shell escapes
%	(though this will fail for files whose path is to be determined after
%	python searches for the under ./img)
\usepackage{xifthen}
\usepackage{forloop}
\usepackage{xkeyval}
\usepackage{adjustbox}
\usepackage{calc}
\usepackage{color}
\usepackage{amsopn}
%\usepackage{fmtcount}


% theorem environments
%\def\coloredthm{1}

\ifx\beamerbutton\undefined%
	\ifx\coloredthm\undefined%
		\makeatletter
		\@ifpackageloaded{amsmath}{
		\@ifclassloaded{llncs}{}{  % LNCS class defines its own theorem style
			\newtheorem{definition}{Definition}
			\newtheorem{problem}[definition]{Problem}
			\newtheorem{proposition}[definition]{Proposition}
			\newtheorem{lemma}[definition]{Lemma}
			\newtheorem{theorem}[definition]{Theorem}
			\newtheorem{corollary}[definition]{Corollary}
			\newtheorem{remark}[definition]{Remark}
			\newtheorem{assumption}[definition]{Assumption}
			\newtheorem{example}{Example}
		}}
		\makeatother
	\else%
		\usepackage{thmtools}%
		\declaretheorem[name=Definition,shaded={bgcolor=YellowGreen}]{definition}
		\declaretheorem[name=Proposition,sibling=definition,shaded={bgcolor=Yellow}]{proposition}
		\declaretheorem[name=Lemma,sibling=definition,shaded={bgcolor=YellowOrange!50}]{lemma}
		\declaretheorem[name=Theorem,sibling=definition,shaded={bgcolor=Melon}]{theorem}
		\declaretheorem[name=Corollary,sibling=definition,shaded={bgcolor=Cyan!30}]{corollary}
		\declaretheorem[name=Remark,sibling=definition]{remark}
		\declaretheorem[name=Assumption,sibling=definition,shaded={bgcolor=Red!40}]{assumption}
	\fi%
\else%
	\definecolor{YellowGreen}{rgb}{0.6,0.8,0.2}
	\definecolor{Melon}{rgb}{1.0,0.74,0.7}
	
%	\let\OLDdefinition=\definition
%	\def\definition{%
%		\setbeamercolor{block title}{fg=white,bg=YellowGreen!50!black}%
%		\setbeamercolor{block body}{fg=black,bg=YellowGreen!20}\OLDdefinition
%	}
%	
%	\let\OLDlemma=\lemma
%	\def\lemma{%
%		\setbeamercolor{block title}{fg=white,bg=Melon!50!black}%
%		\setbeamercolor{block body}{fg=black,bg=Melon!20}\OLDlemma
%	}
%	
%	\let\OLDtheorem=\theorem
%	\def\theorem{%
%		\setbeamercolor{block title}{fg=white,bg=orange!50!black}%
%		\setbeamercolor{block body}{fg=black,bg=orange!20}\OLDtheorem
%	}
%	
%	\let\OLDcorollary=\corollary
%	\def\corollary{%
%		\setbeamercolor{block title}{fg=white,bg=cyan!50!black}%
%		\setbeamercolor{block body}{fg=black,bg=cyan!30}\OLDcorollary
%	}

	\let\definition\relax
	\newenvironment<>{definition}[1][\undefined]{%
	\begin{actionenv}#2%
	\ifx#1\undefined%
		\def\insertblocktitle{Definition}%
	\else%
		\def\insertblocktitle{Definition ({\em#1})}%
	\fi%
	\par%
	\mode<presentation>{%
		\setbeamercolor{block title}{fg=white,bg=YellowGreen!50!black}%
		\setbeamercolor{block body}{fg=black,bg=YellowGreen!20}%
	}%
	\usebeamertemplate{block begin}}
	{\par\usebeamertemplate{block end}\end{actionenv}}
	
	
	\newenvironment<>{assumption}[1][\undefined]{%
	\begin{actionenv}#2%
	\ifx#1\undefined%
		\def\insertblocktitle{Assumption}%
	\else%
		\def\insertblocktitle{Assumption ({\em#1})}%
	\fi%
	\par%
	\mode<presentation>{%
		\setbeamercolor{block title}{fg=white,bg=red!50!black}%
		\setbeamercolor{block body}{fg=black,bg=red!20}%
	}%
	\usebeamertemplate{block begin}}
	{\par\usebeamertemplate{block end}\end{actionenv}}
	
	\newenvironment<>{proposition}[1][\undefined]{%
	\begin{actionenv}#2%
	\ifx#1\undefined%
		\def\insertblocktitle{Proposition}%
	\else%
		\def\insertblocktitle{Proposition ({\em#1})}%
	\fi%
	\par%
	\mode<presentation>{%
		\setbeamercolor{block title}{fg=white,bg=yellow!50!black}%
		\setbeamercolor{block body}{fg=black,bg=yellow!20}%
	}%
	\usebeamertemplate{block begin}}
	{\par\usebeamertemplate{block end}\end{actionenv}}

	\let\lemma\relax
	\newenvironment<>{lemma}[1][\undefined]{%
	\begin{actionenv}#2%
	\ifx#1\undefined%
		\def\insertblocktitle{Lemma}%
	\else%
		\def\insertblocktitle{Lemma ({\em#1})}%
	\fi%
	\par%
	\mode<presentation>{%
		\setbeamercolor{block title}{fg=white,bg=Melon!50!black}%
		\setbeamercolor{block body}{fg=black,bg=Melon!20}%
	}%
	\usebeamertemplate{block begin}}
	{\par\usebeamertemplate{block end}\end{actionenv}}
	
	\let\theorem\relax
	\newenvironment<>{theorem}[1][\undefined]{%
	\begin{actionenv}#2%
	\ifx#1\undefined%
		\def\insertblocktitle{Theorem}%
	\else%
		\def\insertblocktitle{Theorem ({\em#1})}%
	\fi%
	\par%
	\mode<presentation>{%
		\setbeamercolor{block title}{fg=white,bg=orange!50!black}%
		\setbeamercolor{block body}{fg=black,bg=orange!20}%
	}%
	\usebeamertemplate{block begin}}
	{\par\usebeamertemplate{block end}\end{actionenv}}
	
	\let\corollary\relax
	\newenvironment<>{corollary}[1][\undefined]{%
	\begin{actionenv}#2%
	\ifx#1\undefined%
		\def\insertblocktitle{Corollary}%
	\else%
		\def\insertblocktitle{Corollary ({\em#1})}%
	\fi%
	\par%
	\mode<presentation>{%
		\setbeamercolor{block title}{fg=white,bg=cyan!50!black}%
		\setbeamercolor{block body}{fg=black,bg=cyan!30}%
	}%
	\usebeamertemplate{block begin}}
	{\par\usebeamertemplate{block end}\end{actionenv}}
	
	\newenvironment<>{remark}[1][\undefined]{%
	\begin{actionenv}#2%
	\ifx#1\undefined%
		\def\insertblocktitle{Remark}%
	\else%
		\def\insertblocktitle{Remark ({\em#1})}%
	\fi%
	\par%
	\mode<presentation>{%
		\setbeamercolor{block title}{fg=white,bg=red!50!black}%
		\setbeamercolor{block body}{fg=black,bg=red!20}%
	}%
	\usebeamertemplate{block begin}}
	{\par\usebeamertemplate{block end}\end{actionenv}}
\fi%


\newcommand{\problemlabel}[1]{\label[problem]{#1}}%
\newcommand{\asslab}[1]{\label[assumption]{#1}}%
\newcommand{\deflab}[1]{\label[definition]{#1}}%
\newcommand{\prolab}[1]{\label[proposition]{#1}}%
\newcommand{\lemlab}[1]{\label[lemma]{#1}}%
\newcommand{\thelab}[1]{\label[theorem]{#1}}%
\newcommand{\corlab}[1]{\label[corollary]{#1}}%
\newcommand{\remlab}[1]{\label[remark]{#1}}%

%=========================================
% Example Usage of theoremstyles in beamer
%=========================================
%\begin{frame}{Testing theoremstyles 1}{custom}
%	\begin{definition}[one]
%		hello
%	\end{definition}
%	
%	\begin{assumption}[two]
%		hello
%	\end{assumption}
%	
%	\begin{proposition}[three]
%		hello
%	\end{proposition}
%\end{frame}
%
%\begin{frame}{Testing theoremstyles 2}{custom}
%	\begin{lemma}[four]
%		hello
%	\end{lemma}
%	
%	\begin{theorem}[five]
%		hello
%	\end{theorem}
%	
%	\begin{corollary}[six]
%		hello
%	\end{corollary}
%
%	\begin{remark}[seven]
%		hello
%	\end{remark}
%\end{frame}
%=========================================

% theorem environments with common numbering

% fix ref auto-naming
\crefname{definition}{Definition}{Definitions}%
\crefname{problem}{Problem}{Problems}%
\crefname{proposition}{Proposition}{Propositions}%
\crefname{theorem}{Theorem}{Theorems}%
\crefname{lemma}{Lemma}{Lemmas}%
\crefname{corollary}{Corollary}{Corollaries}%
\crefname{remark}{Remark}{Remarks}%
\crefname{assumption}{Assumption}{Assumptions}%

% theorem autoref
%\def\definitionautorefname{Definition}%
%\def\propositionautorefname{Proposition}%
%\def\theoremautorefname{Theorem}%
%\def\lemmaautorefname{Lemma}%
%\def\remarkautorefname{Remark}%
